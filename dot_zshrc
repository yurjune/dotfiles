## ---- ENV ----
export PATH="/opt/homebrew/bin:/usr/local/bin:$PATH"
export PATH="/usr/local/opt/python@3.10/bin:$PATH"
export PATH="$PATH:$HOME/.cargo/bin"
export PYTHON="/usr/local/opt/python@3.10/bin/python3"
export PATH="/opt/homebrew/opt/mysql@8.4/bin:$PATH"
export PATH="/opt/homebrew/opt/postgresql@17/bin:$PATH"

# LLVM
export PATH="/opt/homebrew/opt/llvm/bin:$PATH"
export LDFLAGS="-L/opt/homebrew/opt/llvm/lib"
export CPPFLAGS="-I/opt/homebrew/opt/llvm/include"
export CMAKE_PREFIX_PATH="/opt/homebrew/opt/llvm"

# NVM
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion

# bun
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"
[ -s "/Users/jerry/.bun/_bun" ] && source "/Users/jerry/.bun/_bun"  # bun completions

export ZSH="$HOME/.oh-my-zsh"
export LANG=en_US.UTF-8

## ---- PLUGINS ----
eval "$(oh-my-posh init zsh --config ~/.posh/jandedobbeleer.omp.jsonc)"  # Theme config by oh-my-posh

# Optional: https://github.com/catppuccin/zsh-syntax-highlighting
source ~/.zsh/catppuccin_mocha-zsh-syntax-highlighting.zsh
plugins=(git fzf-tab zsh-autosuggestions zsh-syntax-highlighting)

source $ZSH/oh-my-zsh.sh
source /Users/jerry/.oh-my-zsh/custom/plugins/fzf-tab/fzf-tab.zsh
source /Users/jerry/.oh-my-zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
source /Users/jerry/.oh-my-zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

## ---- OPTIONS ----
setopt IGNORE_EOF  # prevent kill shell by Ctrl-D

## ---- ALIAS ----
alias cls="clear"

alias nv="nvim"
alias lg="lazygit"
alias ch="chezmoi"
alias ff="fastfetch"

alias brewdump="brew bundle dump --force --file=~/.Brewfile"

# TMUX
alias tml="tmux ls"
alias tmn="tmux new -s"
alias tmN="tmux new"
alias tma="tmux attach"
alias tmd="tmux detach"
alias tmk="tmux kill-session"
alias tmkt="tmux kill-session -t"
alias tmK="tmux kill-server"
# apply source ~/.zshrc to all tmux panes
alias tmuxs='for session in $(tmux list-sessions -F "#{session_name}"); do for window in $(tmux list-windows -t "$session" -F "#{window_index}"); do for pane in $(tmux list-panes -t "$session:$window" -F "#{pane_index}"); do tmux send-keys -t "$session:$window.$pane" "source ~/.zshrc" Enter; done; done; done'

alias zshn="nvim ~/.zshrc"
alias zshs="source ~/.zshrc"

# cd
alias cdn="cd ~/.config/nvim"
alias cdns="cd ~/.local/share/nvim"

alias cdc="cd ~/.local/share/chezmoi"
alias cdo="cd ~/obsidian/jerry"
alias cdg="cd ~/github"

alias claude-usage="COLUMNS=200 bunx ccusage -s $(date +%Y%m01) -u $(date +%Y%m99) | grep -E \"(Date.*Models|Total)\""
alias claude-usage-last="COLUMNS=200 bunx ccusage -s $(date -v-1m +%Y%m01) -u $(date -v-1m +%Y%m99) | grep -E \"(Date.*Models|Total)\""

## ---- LOCAL ----
. "$HOME/.local/bin/env"  # 별도의 쉘 환경설정(env) 파일 실행

[ -f ~/.zshrc.local ] && source ~/.zshrc.local
